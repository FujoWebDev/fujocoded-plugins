---
import { defaultDevUser } from "fujocoded:authproto/config";
const currentUser = Astro.locals.loggedInUser;
const { class: className, ...rest } = Astro.props;
---

{
  currentUser ? (
    // If there's a current user, show the log out button
    <form action="/oauth/logout" method="post" class={className} {...rest}>
      <button type="submit">Logout</button>
    </form>
  ) : (
    // If there's no current user, show the log out button
    <form action="/oauth/login" method="post" class={className} {...rest}>
      <input
        name="atproto-id"
        value={import.meta.env.DEV ? defaultDevUser : undefined}
      />
      <button type="submit">Login</button>
    </form>
  )
}
